 
<div class="container editPage">
	<!-- 方案基本信息 -->
	<div class="baseInfo">
		<ul class="breadcrumb">
		  <li><a href="#">产品管理</a> <span class="divider"></span></li>
		  <li><a href="#">服务</a> <span class="divider"></span></li>
		  <li class="active">接送机编辑</li>
		</ul>

		<h4>基本信息</h4>
		<form class="form-horizontal">
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">服务名称</label>
		    <div class="col-sm-10 col-md-11">
		        <input type="text" class="form-control" value="${$data.DetailMain.serviceName}"  data-value="/DetailMain/serviceName" placeholder="不能超过24个字符">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">服务类型</label>
		    <div class="col-sm-10 col-md-11">
		    	<select name="" id="ServiceTypeChoice" class="form-control" >
		    		{{if $data.DetailMain.serviceTypeName=='送机'}}
		    		<option value="" >接机</option>		    		
		    		<option value="" selected>送机</option>
		    		{{else}}
		    		<option value="" selected>接机</option>		    		
		    		<option value="">送机</option>
		    		{{/if}}
		    	</select>
		        <input type="hidden" class="form-control" id="ServiceTypeName" value="${$data.DetailMain.serviceTypeName}"  data-value="/DetailMain/serviceTypeName">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">商品价格</label>
		    <div class="col-sm-10 col-md-11">
		    	<input type="text" class="form-control" value="${$data.DetailMain.primaryPrice}"  data-value="/DetailMain/primaryPrice" > 元/天
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">包含里程</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.incMileage}"  data-value="/DetailMain/incMileage" > 公里
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">额外里程价格</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.exMileagePrice}"  data-value="/DetailMain/exMileagePrice" > 元/公里
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">免费等待时间</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.freeForDelay}"  data-value="/DetailMain/freeForDelay" > 小时
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">额外时长价格</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.waitOutTimePrice}"  data-value="/DetailMain/waitOutTimePrice"> 元/小时
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">服务方式</label>
		    <div class="col-sm-10 col-md-11" id="serviceType">
			    <div id="pickupService">			    	
			    	<label class="radio-inline">
			    	  {{if DetailMain.serviceMethod == 3}}
					  <input type="radio" name="serviceType" id="" value="3" checked> 举牌等候
					  {{else}}
					  <input type="radio" name="serviceType" id="" value="3" > 举牌等候
					  {{/if}}
					</label>					
					<label class="radio-inline">
			    	  {{if DetailMain.serviceMethod == 5}} 
					  <input type="radio" name="serviceType" id="" value="5" checked> 即停即走
					  {{else}}
					  <input type="radio" name="serviceType" id="" value="5"> 即停即走
					  {{/if}}
					</label>
			    </div>
			    <div id="dropoffService">
			    	<label class="radio-inline">
			          {{if DetailMain.serviceMethod == 2}}
					  <input type="radio" name="serviceType2" id="" value="2" checked> 无忧等候
					  {{else}}
					  <input type="radio" name="serviceType2" id="" value="2" > 无忧等候
					  {{/if}}
					</label>
					<label class="radio-inline">
					  {{if DetailMain.serviceMethod == 4}}
					  <input type="radio" name="serviceType2" id="" value="4" checked> 即停即走
					  {{else}}
					  <input type="radio" name="serviceType2" id="" value="4"> 即停即走
					  {{/if}}
					</label>
			    </div>		        
		    </div>
			<input type="hidden" class="form-control" id="ServiceMethodName"  value="${$data.DetailMain.serviceMethod}"  data-value="/DetailMain/serviceMethod">

		  </div>
		  <div class="form-group">
		    <label for="name" class="col-sm-2 col-md-1 control-label">服务描述</label>
		    <div class="col-sm-10 col-md-11">
		      <textarea name="" data-value="/DetailMain/description" class="form-control" rows="5" placeholder="请输入不少于300字描述" >${$data.DetailMain.description}</textarea>
		    </div>
		  </div>
		</form>
	</div>
	<!-- 方案基本信息结束 -->

	<!-- 机场信息 -->
	<div class="baseInfo airportInfo">
		<h4>机场信息</h4>
		<form class="form-horizontal">
		<ul>
		{{each DetailMain.airports}}
		<li style="position: relative; list-style: none;">
		<a class="glyphicon glyphicon-remove-circle deleteAirport" style="right: 25%; z-index: 99;"></a>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">机场代码</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.airports[$index].AirportCode}" data-value="/DetailMain/airports/${$index}/AirportCode" placeholder="请输入">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">机场名称</label>
		    <div class="col-sm-10 col-md-11">
		        <input type="text" class="form-control" value="${$data.DetailMain.airports[$index].NameCh}" data-value="/DetailMain/airports/${$index}/NameCh" placeholder="请输入">
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="" class="col-sm-2 col-md-1 control-label">英文名称</label>
		    <div class="col-sm-10 col-md-11">
		      <input type="text" class="form-control" value="${$data.DetailMain.airports[$index].NameEn}" data-value="/DetailMain/airports/${$index}/NameEn" placeholder="请输入">
		    </div> 
		  </div>
		  <hr>
		</li>
		{{/each}}
		</ul>
		</form>			
		<div class="row textRight">
			<div class="col-sm-10 col-md-8">
			<!-- <button class="btn btn-warning">关联车辆</button> -->
			<button class="btn btn-warning" data-op="change" data-pointer="/DetailMain/airports" data-action="createAirport">选择</button>
			</div>
		</div>
	</div>
	<!-- 机场信息结束 -->

	<!-- 相册上传 -->
	<div class="photoInfo">
		<h4>相册信息</h4>
		<div class="row">
			<div class="col-md-1 ">相册上传:</div>
			<div class="col-md-11 row" >
				{{each $data.DetailMain.picURLs}}
				<div class="col-md-3">
					<div class="imgBox">
						<img name="autoPrefix" src="${$data.DetailMain.picURLs[$index]}">
						<a class="glyphicon glyphicon-remove-circle" data-op="remove" data-pointer="/DetailMain/picURLs/${$index}"></a>
					</div>
				</div>
				{{/each}}
				<div class="col-md-3" data-op="toggle" data-pointer="/DetailMain/picURLs" data-limit="8">
					<div class="imgBox addImg" data-op="change" data-pointer="/DetailMain/picURLs/-" data-action="image">+</div>
				</div>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="col-md-1 ">封面照片:</div>
			<div class="col-md-11 row" >
				{{if $data.DetailMain.coverURL}}
				<div class="col-md-3">
					<div class="imgBox">
						<img name="autoPrefix" src="${$data.DetailMain.coverURL}">
						<a class="glyphicon glyphicon-remove-circle" data-op="remove" data-pointer="/DetailMain/coverURL" ></a>
					</div>
				</div>
				{{else}}
				<div class="col-md-3">
					<div class="imgBox addImg"  data-op="change" data-pointer="/DetailMain/coverURL" data-action="image" >+</div>
				</div>
				{{/if}}
			</div>
		</div>
	</div>
	<!-- 相册上传结束 -->

	<!-- 须知信息 -->
	<div class="notice">
		<h4>须知信息</h4>
		<form class="form-horizontal">
		  <div class="form-group">
		    <label for="name" class="col-sm-2 col-md-1 control-label">退订政策：</label>
		    <div class="col-sm-10 col-md-11">
		      <button type="button" class="btn btn btn-warning" data-toggle="modal" data-target="#policydiv" style="margin-bottom: 8px; background-color: #FF6600; padding: 5px;">请选择退订政策</button>
			    <div id="policyView">
			    {{if $data.DetailMain.policy[0].type == '4'}}
					<h3>${$data.DetailMain.policy[0].policyName}</h3>
					<p>${$data.DetailMain.policy[0].description}</p>
			    {{else}}
			    	<h3>${$data.DetailMain.policy[0].policyName}</h3>
					<p>1、服务开始前${$data.DetailMain.policy[0].day1}天(含)以上退订，退还服务费用的99%；</p>
					<p>2、服务开始前${$data.DetailMain.policy[0].day2}天(含)以上退订，退还服务费用的50%；</p>
					<p>3、服务开始前${$data.DetailMain.policy[0].day3}天(含)以上退订，退还服务费用的20%；</p>
					<p>4、服务开始前${$data.DetailMain.policy[0].day4}天以内退订，不退还服务费用；</p>
					<p>5、导游未及时接单或拒绝订单，全额退还服务费用</p>
				{{/if}}				
			    </div>
		    </div>
			<!-- 退订政策弹出框 -->
			<div id="policydiv" class="modal fade">
		    <div class="modal-dialog">
		      <div class="modal-content">
		        <div class="modal-header">
		          <button type="button" class="close" data-dismiss="modal">
		          	<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
		          </button>
		          <h4 class="modal-title clearfix">退订政策</h4>
		        </div>
		        <div class="modal-body">
		        	<ul>
			        	<li class="row policybox">
				        	<!-- <div class="title clearfix"></div> -->
							<div class="main">
								<div class="col-md-2">
									<input type="radio" class="col-md-2" id="returnOption1" name="optionsRadios" value="1">
								</div>
								<div id="policycontent1" class="col-md-10">
									<h3>严格的退订政策</h3>
									<p>1、服务开始前14天(含)以上退订，退还服务费用的99%；</p>
									<p>2、服务开始前7天(含)至14天退订，退还服务费用的50%；</p>
									<p>3、服务开始前3天(含)至7天退订，退还服务费用的20%；</p>
									<p>4、服务开始前3天以内退订，不退还服务费用；</p>
									<p>5、导游未及时接单或拒绝订单，全额退还服务费用</p>
								</div>
							</div>
				        </li>
				        <li class="row policybox">
				        	<!-- <div class="title clearfix"></div> -->
							<div class="main">
								<div class="col-md-2">
									<input type="radio" class="col-md-2" id="returnOption2" name="optionsRadios" value="2">
								</div>
								<div id="policycontent2" class="col-md-10">
									<h3>中等的退订政策</h3>
									<p>1、服务开始前14天(含)以上退订，退还服务费用的99%；</p>
									<p>2、服务开始前7天(含)至14天退订，退还服务费用的50%；</p>
									<p>3、服务开始前3天(含)至7天退订，退还服务费用的20%；</p>
									<p>4、服务开始前3天以内退订，不退还服务费用；</p>
									<p>5、导游未及时接单或拒绝订单，全额退还服务费用</p>
								</div>
							</div>
				        </li>
				        <li class="row policybox">
				        	<!-- <div class="title clearfix "></div> -->
							<div class="main">
								<div class="col-md-2">
									<input type="radio" class="col-md-2" id="returnOption3" name="optionsRadios" value="3">
								</div>
								<div id="policycontent3" class="col-md-10">
									<h3>宽松的退订政策</h3>
									<p>1、服务开始前14天(含)以上退订，退还服务费用的99%；</p>
									<p>2、服务开始前7天(含)至14天退订，退还服务费用的50%；</p>
									<p>3、服务开始前3天(含)至7天退订，退还服务费用的20%；</p>
									<p>4、服务开始前3天以内退订，不退还服务费用；</p>
									<p>5、导游未及时接单或拒绝订单，全额退还服务费用</p>
								</div>
							</div>
				        </li>
						<li class="row policybox">
							<!-- <div class="title clearfix "></div> -->
							<div class="main">
								<div class="col-md-2">
									<input type="radio" class="col-md-2" id="returnOption4" name="optionsRadios" value="4">
								</div>
								<div id="policycontent5" class="col-md-10">
									<h3>不可退订</h3>
									<p>任何时候退订，不退还服务费用</p>
								</div>
							</div>
						</li>
				        <li class="row policybox">
				        	<!-- <div class="title clearfix"></div> -->
							<div class="main">
								<div class="col-md-2">
									<input type="radio" class="col-md-2" id="option5" name="optionsRadios" value="5">
								</div>
								<div id="policycontent4" class="col-md-10">
									<h3>自定义的退订政策</h3>
									<p>1、服务开始前<input type="text" value="${$data.DetailMain.policy[0].day1}" data-value="/DetailMain/policy/${0}/day1">天(含)以上退订，退还服务费用的99%；</p>
									<p>2、服务开始前<input type="text" value="${$data.DetailMain.policy[0].day2}" data-value="/DetailMain/policy/${0}/day2">天(含)以上退订，退还服务费用的50%；</p>
									<p>3、服务开始前<input type="text" value="${$data.DetailMain.policy[0].day3}" data-value="/DetailMain/policy/${0}/day3">天(含)以上退订，退还服务费用的20%；</p>
									<p>4、服务开始前<input type="text" value="${$data.DetailMain.policy[0].day4}" data-value="/DetailMain/policy/${0}/day4">天以内退订，不退还服务费用；</p>
									<p>5、导游未及时接单或拒绝订单，全额退还服务费用</p>
								</div>
							</div>
				        </li>
					</ul>
		        </div> <!-- end modal-body -->
		        <div class="modal-footer">
		          <button type="button" id="policyconfirm" class="btn btn-primary" data-dismiss="modal">确定</button>
		        </div>
		      </div><!-- /.modal-content -->
		    </div><!-- /.modal-dialog -->
			</div><!-- /.modal -->
			<!-- 退订政策弹出框 -->
		  </div>
		  <div class="form-group">
		    <label for="name" class="col-sm-2 col-md-1 control-label">费用包含：</label>
		    <div class="col-sm-10 col-md-11">
		      <textarea name="" data-value="/DetailMain/policy/1/customRatio" class="form-control">${$data.DetailMain.policy[1].customRatio}</textarea>
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="name" class="col-sm-2 col-md-1 control-label">费用不包含：</label>
		    <div class="col-sm-10 col-md-11">
		      <textarea name="" data-value="/DetailMain/policy/2/customRatio" class="form-control">${$data.DetailMain.policy[2].customRatio}</textarea>
		    </div>
		  </div>
		  <div class="form-group">
		    <label for="name" class="col-sm-2 col-md-1 control-label">预订须知：</label>
		    <div class="col-sm-10 col-md-11">
		      <textarea name="" data-value="/DetailMain/policy/3/caution" class="form-control">${$data.DetailMain.policy[3].caution}</textarea>
		    </div>
		  </div>
		</form>
		<div class="optionBtn">
			<button id="savePickup" class="btn btn-warning">保存</button>
			<button id="publish" class="btn btn-warning">发布 </button>
		</div>
	</div>
	<input type="hidden" id="type" data-value="/DetailMain/Policy/0/type"/>

	<!-- 须知信息结束 --> 
</div>

<script>
	$(function(){
		$('#ServiceTypeChoice').on('change',function(){
			var ServiceTypeName = $(this).find('option:selected').text();
			$('#ServiceTypeName').val(ServiceTypeName).trigger('keyup');
			if (ServiceTypeName == '接机') {
				$('#pickupService').show();
				$('#dropoffService').hide();
				var ServiceMethodName = $('#pickupService').find('input:checked').val();
			}else if(ServiceTypeName == '送机'){
				$('#pickupService').hide();
				$('#dropoffService').show();
				var ServiceMethodName = $('#dropoffService').find('input:checked').val();
			}
			$('#ServiceMethodName').val(ServiceMethodName).trigger('keyup');
		});
		$('#ServiceTypeChoice').trigger('change');
		$('#serviceType').on('click','input',function(){
			var ServiceMethodName = $(this).val();
			$('#ServiceMethodName').val(ServiceMethodName).trigger('keyup');
		});
	});
</script>

